#!/bin/bash

# File: initialize-injector
# Created: $(date +%Y-%m-%d)
# Description: Sources all files in the initialize directory

# Load version information
if [ -f "$DOTFILES_PATH/initialize/version.txt" ]; then
    # Source version file in a subshell to avoid polluting the environment
    eval "$(grep -E '^(VERSION|LAST_UPDATED)=' "$DOTFILES_PATH/initialize/version.txt")"
    export DOTFILES_VERSION="$VERSION"
    export DOTFILES_LAST_UPDATED="$LAST_UPDATED"
fi

# Source all files in the initialize directory
if [ -d "$DOTFILES_PATH/initialize" ]; then
    log "info" "Loading initialization files from $DOTFILES_PATH/initialize"
    for init_file in "$DOTFILES_PATH/initialize"/*; do
        if [ -f "$init_file" ]; then
            log "info" "Sourcing initialization file: $(basename "$init_file")"
            source "$init_file"
        fi
    done
else
    log "warn" "Initialize directory not found at $DOTFILES_PATH/initialize"
fi 